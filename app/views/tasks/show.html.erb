<div class="container">
  <%# タスクの情報を表示 %>
  <div class="task-info-wrapper">
    <div class="each-task-info">
      <h2><%= @task.title %></h2>
      <h4>Purpose</h4>
      <h5><%= @task.purpose %><h5>
      <h4>Goal</h4>
      <h5><%= simple_format(h(@task.goal)) %></h5>
    </div>
    <div class="task-title-buttons">
      <%= link_to edit_task_path(@task), class: "btn btn-primary" do %>
        <i class="fas fa-edit"></i>
      <% end %>
      <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#taskDestroyModal">
        <i class="fas fa-trash-alt"></i>
      </button>
    </div>
  </div>
  <%# /タスクの情報を表示 %>

  <div class="commit-log-and-message-wrapper">

    <%# コミットを一覧表示 %>
    <div class="commit-log-wrapper">
      <h2>Commit Log</h2>
      <%= link_to new_task_commit_path(@task) do %>
        <i class="fas fa-plus-circle"></i> 新規作成
      <% end %>
      <ul class="list-group">
        <%# 各コミット%>
        <%= render partial: '/commits/commit', collection: @commits %>
        <%# /各コミット%>
      </ul>
    </div>
    <%# /コミットを表示 %>

    <%# メッセージ部%>
    <div class="message-wrapper">
      <%# メッセージフォーム %>
      <h2>Message Form</h2>
      <%= form_with model: [@task, @message], id: "message-form" do |f| %>
        <%= f.text_area :text, style: "width: 90%" %>
        <%= f.submit id: "message-submit" %>
      <% end %>
      <%# /メッセージフォーム %>
      <%# 埋め込み先リスト %>
      <div>
        <ul id="message-list">
          <% @messages.each do |message| %>
            <li class="message-over-flow-wrap"><%= "#{message.text} by #{message.user.nickname}" %></li>
          <% end %>
        </ul>
      </div>
      <%# /埋め込み先リスト %>
    </div>
    <%# /メッセージ部%>
  </div>

  <%# destroyモーダル %>
  <%= render partial: '/shared/destroy_modal', locals: { id: "taskDestroyModal", target: "タスク", url: task_path(@task) } %>
  <%#/ モーダル %>

</div>